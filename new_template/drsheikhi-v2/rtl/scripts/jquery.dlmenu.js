!function(a,b){"use strict";var d=b.Modernizr,e=a("body");a.DLMenu=function(b,c){this.$el=a(c),this._init(b)},a.DLMenu.defaults={animationClasses:{"in":"dl-animate-in-1",out:"dl-animate-out-1"}},a.DLMenu.prototype={_init:function(b){this.options=a.extend(!0,{},a.DLMenu.defaults,b),this._config();var c={WebkitAnimation:"webkitAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd",animation:"animationend"},e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.animEndEventName=c[d.prefixed("animation")]+".dlmenu",this.transEndEventName=e[d.prefixed("transition")]+".dlmenu",this.supportAnimations=d.cssanimations,this.supportTransitions=d.csstransitions,this._initEvents()},_config:function(){this.open=!1,this.$trigger=this.$el.children("button"),this.$menu=this.$el.children("ul.dl-menu"),this.$menuitems=this.$menu.find("li:not(.dl-back)"),this.$back=this.$menu.find("li.dl-back")},_initEvents:function(){var b=this;this.$trigger.on("click.dlmenu",function(){return b.open?b._closeMenu():(b._openMenu(),e.off("click").on("click.dlmenu",function(){b._closeMenu()})),!1}),this.$menuitems.on("click.dlmenu",function(c){c.stopPropagation();var d=a(this),e=d.children("ul.dl-submenu");if(e.length>0){var f=e.clone().insertAfter(b.$menu).addClass(b.options.animationClasses.in),g=function(){b.$menu.off(b.animEndEventName).removeClass(b.options.animationClasses.out).addClass("dl-subview"),d.addClass("dl-subviewopen").parents(".dl-subviewopen:first").removeClass("dl-subviewopen").addClass("dl-subview"),f.remove()};return b.$menu.addClass(b.options.animationClasses.out),b.supportAnimations?b.$menu.on(b.animEndEventName,g):g.call(),!1}}),this.$back.on("click.dlmenu",function(){var d=a(this),e=d.parents("ul.dl-submenu:first"),f=e.parent(),g=e.clone().insertAfter(b.$menu).addClass(b.options.animationClasses.out),h=function(){b.$menu.off(b.animEndEventName).removeClass(b.options.animationClasses.in),g.remove()};b.$menu.addClass(b.options.animationClasses.in),b.supportAnimations?b.$menu.on(b.animEndEventName,h):h.call(),f.removeClass("dl-subviewopen");var i=d.parents(".dl-subview:first");return i.is("li")&&i.addClass("dl-subviewopen"),i.removeClass("dl-subview"),!1})},_closeMenu:function(){var a=this,b=function(){a.$menu.off(a.transEndEventName),a._resetMenu()};this.$menu.removeClass("dl-menuopen"),this.$menu.addClass("dl-menu-toggle"),this.$trigger.removeClass("dl-active"),this.supportTransitions?this.$menu.on(this.transEndEventName,b):b.call(),this.open=!1},_openMenu:function(){this.$menu.addClass("dl-menuopen dl-menu-toggle").on(this.transEndEventName,function(){a(this).removeClass("dl-menu-toggle")}),this.$trigger.addClass("dl-active"),this.open=!0},_resetMenu:function(){this.$menu.removeClass("dl-subview"),this.$menuitems.removeClass("dl-subview dl-subviewopen")}};var f=function(a){b.console&&b.console.error(a)};a.fn.dlmenu=function(b){if("string"===typeof b){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var d=a.data(this,"dlmenu");return d?a.isFunction(d[b])&&"_"!==b.charAt(0)?void d[b].apply(d,c):void f("no such method '"+b+"' for dlmenu instance"):void f("cannot call methods on dlmenu prior to initialization; attempted to call method '"+b+"'")})}else this.each(function(){var c=a.data(this,"dlmenu");c?c._init():c=a.data(this,"dlmenu",new a.DLMenu(b,this))});return this}}(jQuery,window);